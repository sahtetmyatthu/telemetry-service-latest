spring.application.name=telemetry-service

# ============================================================================
# TELEMETRY CONFIGURATION - OPTIMIZED FOR PERFORMANCE
# ============================================================================

# FIXED: Reduce thread pool size (was 1000!)
# This should match max-ports to prevent thread explosion
telemetry.thread-pool-size=50

# Idle threshold before stopping listener (milliseconds)
telemetry.idle-threshold-ms=30000

# FIXED: Reduce max ports to reasonable number
# Each port = 1 thread, so this limits resource usage
telemetry.max-ports=50

# FIXED: Narrow port range to reduce scanning overhead
# Only scan ports you actually use
telemetry.port-range.min=1000
telemetry.port-range.max=1050

# FIXED: Increase scanner timeout to reduce CPU usage
# Longer timeout = fewer scans per second
telemetry.scanner-timeout-ms=2000

# UDP buffer size (bytes) - this is fine
telemetry.buffer-size=265

# ============================================================================
# JPA/HIBERNATE OPTIMIZATIONS
# ============================================================================

# FIXED: Batch inserts for better performance
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# FIXED: Use connection pooling
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# ============================================================================
# JVM TUNING RECOMMENDATIONS (add to startup)
# ============================================================================
# Add these to your JVM arguments:
# -Xms512m -Xmx2048m          // Heap size
# -XX:MaxMetaspaceSize=256m    // Non-heap for classes
# -XX:+UseG1GC                 // Use G1 garbage collector
# -XX:MaxGCPauseMillis=200     // GC pause target
# -Xss256k                     // Reduce thread stack size (default is 1MB!)